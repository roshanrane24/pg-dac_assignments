<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Assignment 3_day 4_js 29</title>
        <script>
            function validateTime() {
                var time = document.getElementById("period");
                var err = document.getElementById("error-tm");

                err.innerHTML = ""
                var t = parseInt(time.value);

                if (t >= 7 && t <= 15)
                    return true;

                time.focus();
                time.select();

                err.style.color = "red";
                err.innerHTML = "Repayment period should be between 7 & 15 years";
                return false;
            }

            function validateAmount() {
                var amount = parseInt(document.getElementById("amount").value);
                var err = document.getElementById("error-am");

                err.innerHTML = "";

                if (amount > 1500000)
                    return true;

                err.style.color = "red";
                err.innerHTML = "Amount should be more than 15L";
                return false;
            }

            function compute() {
                var amount = parseInt(document.getElementById("amount").value);
                var rate = parseInt(document.getElementById("roi").value);
                var time = parseInt(document.getElementById("period").value);

                var mp = document.getElementById("monthly-payment");
                var tp = document.getElementById("total-payment");
                var tip = document.getElementById("total-interest-payment");

                tip.value = Math.round((amount * (1 + rate, time)) - 1)
                tp.value = Math.round(amount
                           + (amount * (1 + rate, time)) - 1)
                mp.value = Math.round((amount
                           + (amount * (1 + rate, time)) - 1) / (time * 12))
            }

            function validateForm() {
                if (validateAmount() && validateTime()) {
                    compute();
                    return true;
                } else {
                    return false;
                }
            }
            window.onload = () => {
                var form = document.getElementById("form");

                form.onsubmit = () => {return validateForm()};
            }
        </script>
    </head>
    <body>
        <form action="#" id="form">
            <p id="error-am"></p>
            <p id="error-tm"></p>
            <table>
                <tr>
                    <td colspan="2">
                        <h3>Enter Loan Information:</h3>
                    </td>
                </tr>
                <tr>
                    <td>1) Amount of the loan (any currency)</td>
                    <td><input type="number" id="amount" required></td>
                </tr>
                <tr>
                    <td>2) Annual percentage rate of interest</td>
                    <td><input type="number" id="roi" required></td>
                </tr>
                <tr>
                    <td>3) Repayment period in year</td>
                    <td><input type="number"  id="period" required></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <h3><input type="submit" value="Compute"> Payment Information:</h3>
                    </td>
                </tr>
                <tr>
                    <td>4) Your monthly payment will be</td>
                    <td><input type="text" id="monthly-payment" readonly></td>
                </tr>
                <tr>
                    <td>5) Your total payment will be</td>
                    <td><input type="text" id="total-payment" readonly></td>
                </tr>
                <tr>
                    <td>6) Your total interest payment will be</td>
                    <td><input type="text" id="total-interest-payment" readonly></td>
                </tr>
            </table>
        </form>
    </body>
</html>
